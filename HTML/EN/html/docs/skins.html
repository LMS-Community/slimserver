[% pagetitle = 'Skin Creation' %]
[% techinfo = '1' %]
[% lefttoright = '1' %]
[% PROCESS helpheader.html %]
[% TAGS star %]

  <h4>Overview</h4>
  <EM>WARNING: This documentation is substantially out of date.</EM>
  <p>
    The web interface to the Logitech Media Server makes use of customizable html
    templates collected together into a skin.  These skins reside in the
    <strong>html</strong> subfolder of the folder where the server software was
    installed.  The skin subfolders are presented for selection in the
    additional server settings setup page based on the name of the skin
    subfolder.  The default skin is in the <strong>EN</strong> subfolder.  Each
    skin can have a subfolder named <strong>html</strong> which can contain
    static content such as this documentation, or images for use with the
    dynamic content of the skin.
  </p>
  <p>
    When a page not in the <strong>html</strong> subfolder of either your skin
    or the default skin is requested, the server builds the page
    dynamically based on the templates within the skin subfolder.  This building
    is accomplished by gathering information relevant to the requested page in a
    perl subroutine, then using that information to complete the template.
  </p>
  <hr />
  <h4>Directory Structure</h4>

<em>Logitech Media Server</em>
<ul>
  <li>html</li>
  <ul>
    <li>EN</li>
    <ul>
      <li>html...</li>
    </ul>
    <li>Bagpuss</li>
    <ul>
      <li>html...</li>
    </ul>
    <li><em>YourSkin</em>
      <ul>
        <li>html...</li>
      </ul>
  </ul>
  <li>slimserver.exe (or slimserver.pl)</li>
  <li><em>other items...</em></li>
</ul>
<hr />
  <h4><a id="template-syntax">Template Syntax</a></h4>
    <p>
    The template files in the skin directory are primarily html, with some
    server-side processing directives added.  In some cases they are complete
    pages, in others fragments which are meant to be included into a surrounding
    page.  The interrelationships of the files are discussed below in the
    <a href="#template-depend">Template Dependencies</a> section of this document.
  </p>
  <p>
    Logitech Media Server uses the freely available
    <a href="http://www.template-toolkit.org/">Template Toolkit</a> version 2.13
    for its templates.  <a href="http://www.template-toolkit.org/docs/plain/index.html">
    Full documentation</a> is available at the linked web site.  Some of the simpler
    directives are detailed in the <a href="#template-direct">Template
    Directives</a> section.
  </p>
  <p>
    When a dynamic page is requested, the server builds a parameter hash which
    is used along with the template to create the final html which is returned to
    the requestor. The server-side directives contain references to the keys of
    this parameter hash. For practical purposes this means that each template has
    a list of variables available to it (corresponding to the keys of that
    parameter hash) which it uses with the directives to produce the desired final
    text. The list of variables available to each template is discussed below in the
    <a href="#template-var">Template Variables</a> section.
  </p>
<hr />
  <h4><a id="template-direct">Template Directives</a></h4>
  <p>
    The following are some of the simpler directives made available through the
    Template Toolkit.  Note that directives may be nested as needed.  For more
    advanced uses, please read the documentation at the Template Toolkit website.
  </p>
  <p>
    All directives under Template Toolkit are bracketed by <strong>[%</strong>
    and <strong>%]</strong>.
  </p>
  <dl>
    <dt><strong>[% GET <var>param</var> %]</strong></dt>
    <dt><strong>[% <var>param</var> %]</strong></dt>
    <dd>
      This directive is replaced by the value of <var>param</var>
    </dd>
    <dt><strong>[% SET <var>param</var> = <var>value</var> %]</strong></dt>
    <dt><strong>[% <var>param</var> = <var>value</var> %]</strong></dt>
    <dd>
      This directive sets <var>param</var> to <var>value</var>.
    </dd>
    <dt><strong>[% IF <var>expression</var> %]<var>text</var>[% END %]</strong></dt>
    <dt><strong>[% UNLESS <var>expression</var> %]<var>text</var>[% END %]</strong></dt>
    <dt><strong>[% IF <var>expression</var> %]<var>text1</var>[% ELSE %]<var>text2</var>[% END %]</strong></dt>
    <dt><strong>[% IF <var>expression1</var> %]<var>text1</var>[% ELSIF <var>expression2</var> %]<var>text2</var>[% ELSE %]<var>text3</var>[% END %]</strong></dt>
    <dd>
      The <strong>IF</strong> directive evaluates <var>expression</var> according
      to standard perl rules.  If <var>expression</var> evaluates true, the directive
      is replaced by the contents of <var>text</var>, which may itself contain
      directives.  If <var>expression</var> evaluates false, the directive is
      replaced by the empty string.  <var>expression</var> can be almost any valid
      perl expression, for example it could take the form of <var>param</var>
      <var>comparator</var> <var>value</var>, where <var>comparator</var> is one of
      &lt;, &lt;=, ==, !=, =&gt;, &gt;, lt, le, eq, ne, ge, gt.
    </dd>
    <dd>
      The <strong>UNLESS</strong> is the opposite, replacing with the empty string
      if <var>expression</var> is true, and with <var>text</var> if <var>expression</var>
      is false.
    </dd>
    <dd>
      If an <strong>ELSE</strong> directive is present the <var>text2</var> replaces
      the entire <strong>IF</strong>/<strong>UNLESS</strong> block instead of the empty
      string.  The <strong>ELSIF</strong> directive provides a means of chaining together
      multiple <var>expressions</var> to control the replacement text.
    </dd>
    <dt><strong>[% FILTER <var>filtername</var> %] <var>filtertext</var> [% END %]</strong></dt>
    <dt><strong>[% <var>filtertext</var> | <var>filtername</var> %]</strong></dt>
    <dd>
      The <strong>FILTER</strong> directive takes <var>filtertext</var> and processes
      it using the filter <var>filtername</var>.  For more info see the
      <a href="#template-filter">Template Filters</a> section.
    </dd>
    <dt><strong>[% INSERT <var>file</var> %]</strong></dt>
    <dt><strong>[% INCLUDE <var>file</var> %]</strong></dt>
    <dt><strong>[% PROCESS <var>file</var> %]</strong></dt>
    <dd>
      These directives allow you to build the output using multiple files.  The
      <strong>INSERT</strong> directive adds the contents of <var>file</var> to
      the output without any additional processing.  The <strong>INCLUDE</strong>
      directive makes a copy of the parameter hash and uses this copy in processing
      <var>file</var> with Template Toolkit.  The <strong>PROCESS</strong> directive
      is the same as <strong>INCLUDE</strong>, except that the parameter hash is not
      copied first.  This means that if the template is processed using a
      <strong>PROCESS</strong> directive, any <strong>SET</strong> directives in
      that template will be able to change parameters in the current template, whereas
      if the <strong>INCLUDE</strong> directive were used the current parameters
      would not be able to be changed by the processed template.
    </dd>
  </dl>
<hr />
  <h4><a id="template-plugin">Template Plugins</a></h4>
  <p>
    Template Toolkit supports the use of plugins to add functionality.  These
    are different from server plugins.  There are currently no server
    specific plugins implemented.  The standard Template Toolkit plugins are
    available, except for those that require the use of other CPAN modules
    that have not already been included with server.
  </p>
<hr />
  <h4><a id="template-filter">Template Filters</a></h4>
  <p>
    Template Toolkit makes use of perl functions called filters to perform processing
    of text.  The server includes all the standard Template Toolkit filters, plus
    some additional ones described here.
  </p>
  <dl>
    <dt><strong>nbsp</strong></dt>
    <dd>
      This filter converts all spaces in the filter text to &amp;nbsp; to prevent the
      filtered text from wrapping.
    </dd>
    <dt><strong>string</strong></dt>
    <dd>
      This filter uses Slim::Utils::Strings::string to localize the filter text.
    </dd>
    <dt><strong>uri</strong></dt>
    <dd>
      This filter replaces the standard Template Toolkit <strong>uri</strong> filter
      with URI::Escape::uri_escape.
    </dd>
    <dt><strong>unuri</strong></dt>
    <dd>
      This filter uses URI::Escape::uri_unescape to change from uri escaped text
      to normal text.
    </dd>
  </dl>
<hr />
  <h4><a id="template-depend">Template Dependencies</a></h4>
  <p>
    Only a subset of the templates used are directly requestable from the web
    interface.  The others are used to fill in parameters for the requestable
    ones.  The requestable templates and the templates subordinate to them are
    listed below.  All templates can be requested as either <strong>*.htm</strong>
    or <strong>*.html</strong>.
  </p>
  <dl>
    <dt><strong>index.html</strong></dt>
    <dt><strong>home.html</strong></dt>
      <dd>
        <ul>
          <li>homeplayer_list.html</li>
        </ul>
      </dd>
    <dt><strong>status.html</strong></dt>
      <dd>
        <ul>
          <li>pagebarheader.html</li>
          <li>pagebar.html</li>
            <ul>
              <li>pagebarlist.html</li>
            </ul>
          <li>status_list.html</li>
        </ul>
      </dd>
    <dt><strong>browse.html</strong></dt>
      <dd>
        <ul>
          <li>badpath.html</li>
          <li>browse_pwdlist.html</li>
          <li>pagebarheader.html</li>
          <li>pagebar.html</li>
            <ul>
              <li>pagebarlist.html</li>
            </ul>
          <li>browse_list.html</li>
          <li>browse_playlist.html</li>
            <ul>
              <li>browse_playlist_list.html</li>
            </ul>
        </ul>
      </dd>
    <dt><strong>browsedb.html</strong></dt>
      <dd>
        <ul>
          <li>pagebarheader.html</li>
          <li>pagebar.html</li>
            <ul>
              <li>pagebarlist.html</li>
              <li>alphapagebarlist.html</li>
            </ul>
          <li>browsedb_pwdlist.html</li>
          <li>browsedb_list.html</li>
        </ul>
      </dd>
    <dt><strong>songinfo.html</strong></dt>
    <dt><strong>search.html</strong></dt>
      <dd>
        <ul>
          <li>pagebarheader.html</li>
          <li>pagebar.html</li>
            <ul>
              <li>pagebarlist.html</li>
              <li>alphapagebarlist.html</li>
            </ul>
          <li>browsedb_list.html</li>
        </ul>
      </dd>
    <dt><strong>setup.html</strong></dt>
    <dt><strong>*.html under <em>html</em> directory</strong></dt>
  </dl>
  <!-- scratch area
  <p>index.html - none - templated</p>
  <p>browse.html - Pages::browser - templated</p>
  <p>stream.mp3 - addstreamingresponse - not templated</p>
  <p>home.html - Pages::home - templated</p>
  <p>browsedb.html - Pages::browsedb - templated</p>
  <p>artists.html - Pages::artists - templated</p>
  <p>albums.html - Pages::albums - templated</p>
  <p>songinfo.html - Pages::songinfo - templated</p>
  <p>songs.html - Pages::songs - templated</p>
  <p>search.html - Pages::search - templated</p>
  <p>setup.html - Setup::setup_HTTP - templated</p>
  <p>slimserver.css - none - templated</p>
  <p>status.txt - Display::curLines - not templated</p>
  <p>status.html - Pages::status - templated</p>
  <p>html files under <strong>html</strong> subdirectory - none - templated</p>
  <p>non-html files under <strong>html</strong> subdirectory - none - not templated</p>
  end scratch area -->
<hr />  <h4>Non-Template Requestable Items</h4>
  <p>
    Certain requests made to the server HTTP server are fulfilled outside
    of the template mechanism.  Some items are generated dynamically,
    while others are served up as the file exists on the server.  The
    static item requests are satisfied by following the mechanism of
    checking for the requested file first in the selected skin directory,
    then in the default skin directory (<strong>EN</strong>).
  </p>
  <h4>Dynamic Items</h4>
  <dl>
    <dt><strong>status.txt</strong></dt>
      <dd>Returns the text displayed on the currently selected player.</dd>
    <dt><strong>status.m3u</strong></dt>
      <dd>
        Returns the current playlist of the currently selected player in
        m3u format.
      </dd>
    <dt><strong>stream.mp3</strong></dt>
      <dd>Returns an Icecast/Shoutcast style stream.</dd>
  </dl>
  <h4>Static Items</h4>
  <dl>
    <dt><strong>slimserver.css</strong></dt>
      <dd>
        Arguably the most important file to modify to make a skin your own.
      </dd>
    <dt><strong>skin.css</strong></dt>
      <dd>
        Useful for custom styles for a skin, where the bulk of the default styles are
        already acceptable. Anything in this file overrides slimserver.css. Anything not inclucded
        is taken from slimserver.css.
      </dd>
    <dt><strong>favicon.ico</strong></dt>
      <dd>Serves up <em>skin</em>/html/mypage.ico</dd>
    <dt><strong>non-html content in the <em>html</em> directory</strong></dt>
    <dd>
      Currently supported types (suffixes):
      <ul>
        <li>application/pdf (.pdf)</li>
        <li>application/x-java-applet (.class)</li>
        <li>audio/mpeg (.mp3, .mp2)</li>
        <li>audio/x-cue (.cue)</li>
        <li>audio/x-mpegurl (.m3u)</li>
        <li>audio/x-ogg (.ogg)</li>
        <li>audio/x-scpls (.pls)</li>
        <li>image/gif (.gif)</li>
        <li>image/jpeg (.jpg, .jpeg)</li>
        <li>image/png (.png)</li>
        <li>image/x-icon (.ico)</li>
        <li>text/css (.css)</li>
        <li>text/plain (.txt)</li>
      </ul>
    </dd>
  </dl>
  <hr />
  <h4>Template Functions</h4>
  <dl>
    <dt><strong>Pages::browser</strong></dt>
    <dd>
      <dl>
        <dt>Call tree</dt>
        <dd>
          <ul>
            <li>Pages::browser_addtolist_done</li>
            <ul>
              <li>Pages::pagebar</li>
            </ul>
          </ul>
        </dd>
        <dt>Templates used</dt>
        <dd>
          <ul>
            <li>badpath.html</li>
            <li>browse_pwdlist.html</li>
          </ul>
        </dd>
      </dl>
    </dd>
    <dt><strong>Pages::browser_addtolist_done</strong></dt>
    <dd>
      <dl>
        <dt>Call tree</dt>
        <dd>
          <ul>
            <li>Pages::pagebar</li>
          </ul>
        </dd>
        <dt>Templates used</dt>
        <dd>
          <ul>
            <li>browse_playlist_list.html</li>
            <li>browse_list.html</li>
            <li>browse_playlist.html</li>
            <li>browse.html</li>
          </ul>
        </dd>
      </dl>
    </dd>
    <dt><strong>Pages::pagebar</strong></dt>
    <dd>
      <dl>
        <dt>Call tree</dt>
        <dd>no subroutines called</dd>
        <dt>Templates used</dt>
        <dd>
          <ul>
            <li>pagebarheader.html</li>
            <li>pagebar.html</li>
            <li>pagebarlist.html</li>
          </ul>
        </dd>
      </dl>
    </dd>
    <dt><strong>Pages::alphapagebar</strong></dt>
    <dd>
      <dl>
        <dt>Call tree</dt>
        <dd>no subroutines called</dd>
        <dt>Templates used</dt>
        <dd>
          <ul>
            <li>pagebar.html</li>
            <li>alphapagebarlist.html</li>
          </ul>
        </dd>
      </dl>
    </dd>
    <dt><strong>Pages::status</strong></dt>
    <dd>
      <dl>
        <dt>Call tree</dt>
        <dd>
          <ul>
            <li>Pages::pagebar</li>
          </ul>
        </dd>
        <dt>Templates used</dt>
        <dd>
          <ul>
            <li>status.html</li>
            <li>status_list.html</li>
          </ul>
        </dd>
      </dl>
    </dd>
    <dt><strong>Pages::home</strong></dt>
    <dd>
      <dl>
        <dt>Call tree</dt>
        <dd>no subroutines called</dd>
        <dt>Templates used</dt>
        <dd>
          <ul>
            <li>home.html</li>
            <li>homeplayer_list.html</li>
          </ul>
        </dd>
      </dl>
    </dd>
    <dt><strong>Pages::search</strong></dt>
    <dd>
      <dl>
        <dt>Call tree</dt>
        <dd>
          <ul>
            <li>Pages::pagebar</li>
            <li>Pages::alphapagebar</li>
          </ul>
        </dd>
        <dt>Templates used</dt>
        <dd>
          <ul>
            <li>search.html</li>
            <li>browsedb_list.html</li>
          </ul>
        </dd>
      </dl>
    </dd>
    <dt><strong>Pages::songinfo</strong></dt>
    <dd>
      <dl>
        <dt>Call tree</dt>
        <dd>no subroutines called</dd>
        <dt>Templates used</dt>
        <dd>
          <ul>
            <li>songinfo.html</li>
          </ul>
        </dd>
      </dl>
    </dd>
    <dt><strong>Pages::browsedb</strong></dt>
    <dd>
      <dl>
        <dt>Call tree</dt>
        <dd>
          <ul>
            <li>Pages::pagebar</li>
            <li>Pages::alphapagebar</li>
          </ul>
        </dd>
        <dt>Templates used</dt>
        <dd>
          <ul>
            <li>browsedb.html</li>
            <li>browsedb_list.html</li>
            <li>browsedb_pwdlist.html</li>
          </ul>
        </dd>
      </dl>
    </dd>
  </dl>
  <hr />
  <h4><a id="template-var">Template Variables</a></h4>
  <p>
    There are three types of variable available. The first are Template Toolkit
    provided, the second are provided to all pages by the server, and the third are
    provided to specific pages by Logitech Media Server.
  </p>
  <h5>Template Toolkit variables</h5>
  <dl>
    <dt>template</dt>
    <dd>
      A reference to the main template being processed. It contains metainformation about
      the template, such as the name of the template, and when it was last modified.
    </dd>
    <dt>component</dt>
    <dd>Like <var>template</var> but refers to the current template component being processed.</dd>
    <dt>global</dt>
    <dd>A reference to a repository for global information.</dd>
    <dt>dec</dt>
    <dt>inc</dt>
    <dd>Apparently the amount to decrement and increment in a loop, not sure though.</dd>
    <dt>loop</dt>
    <dd>
      <p>A reference to the implicit iterator object created for the FOREACH directive. It is
      only available within each FOREACH loop. Contains these variables:</p>
      <dl>
        <dt>count<dt>
        <dd>Current interation count</dd>
        <dt>first</dt>
        <dd>True for first iteration of the loop, false other times.</dd>
        <dt>index</dt>
        <dd>Number of the current item</dd>
        <dt>last</dt>
        <dd>True on the last iteration of the loop, false other times.</dd>
        <dt>max</dt>
        <dd>Maximum index number</dd>
        <dt>next</dt>
        <dd>A reference to the next item in the set being iterated through</dd>
        <dt>prev</dt>
        <dd>A reference to the previous item in the set being iterated through</dd>
        <dt>size</dt>
        <dd>The number of elements in the set being iterated through.</dd>
      </dl>
    </dd>
    <dt>content</dt>
    <dd>Used in wrapper templates to refer to the wrapped content</dd>
  </dl>
  <h5>Server General Variables</h5>
  <dl>
    <dt>Content-Type<dt>
    <dd>The content type of the requested page, will usually be text/html.</dd>
    <dt>path</dt>
    <dd>The virtual path to the requested page. Excludes the portion in <var>webroot</var>.</dd>
    <dt>host</dt>
    <dd>The host name pulled from the HTTP request header</dd>
    <dt>player</dt>
    <dd>
      The client id of the currently selected player. This is typically sent
      in the GET request for a page. If not in the request, the first client
      is used.
    </dd>
    <dt>playermodel</dt>
    <dd>The type of player (Squeezebox, Transporter or SLIMP3) currently selected.</dd>
    <dt>myClientState</dt>
    <dd>The client object of the currently selected player.</dd>
    <dt>url_query</dt>
    <dd>The query portion of the HTTP request, everything after the &quot;?&quot;</dd>
    <dt>webroot</dt>
    <dd>
      Portion of the path used to determine the virtual root. This includes the skin
      name when a skin other than the &quot;skin&quot; server preference is requested.
      Logitech Media Server also allows a pseudo-root of /slimserver/ to be used, which also ends
      up in <var>webroot</var>. When creating absolute URLs <var>webroot</var> should be
      used as the root rather than simply using &quot;/&quot;.
    </dd>
     <dt>skinOverride</dt>
    <dd>
      When a skin other than the &quot;skin&quot; server preference is requested,
      <var>skinOverride</var> will contain the name of that skin.
    </dd>
   <dt>userAgent</dt>
    <dd>
	The user-agent string from the client browser
    </dd>
  </dl>
  <!--
  <h5>Client Object Properties/Methods</h5>
  <dl>
    <dt></dt>
    <dd></dd>
  </dl>
  TO DO -->
  <h5>Page Specific Variables</h5>
  <dl>
    <dt>index.html</dt>
    <dd>
      General Variables only
    </dd>
    <dt>home.html</dt>
    <dd>General variables</dd>
    <dd>
      <dl>
        <dt><em>Server provided variables:</em></dt>
        <dd>
          <dl>
            <dt>additionalLinks</dt>
            <dd>
              <p>
                Hash of additional links to display. Divided into subhashes by
                link category. Each subhash consists of page title - URL pairs.
                The page titles should be run through the <var>string </var>
                filter before display. The link categories are as follows:
              </p>
              <dl>
                <dt>browse</dt>
                <dd>Pages for the various Browse By categories.</dd>
                <dt>search</dt>
                <dd>Pages for the various Search types.</dd>
                <dt>help</dt>
                <dd>The documentation.</dd>
                <dt>plugins</dt>
                <dd>Pages related to installed plugins.</dd>
                <dt>settings</dt>
                <dd>Pages related to setup of the installed plugins.</dd>
              </dl>
            </dd>
            <dt>album_count</dt>
            <dd>
              Count of unique albums in library. Includes the word album
              or albums after the number.
            </dd>
            <dt>artist_count</dt>
            <dd>
              Count of unique artists in library. Includes the word artist
              or artists after the number.
            </dd>
            <dt>newVersion</dt>
            <dd>
              Indicates the latest version of the server. Not defined if the
              <var>checkVersion</var> server parameter is false.
            </dd>
            <dt>nofolder</dt>
            <dd>
              Set to 1 if the <var>audiodir</var> server parameter is undefined.
              Not defined otherwise.
            </dd>
            <dt>nosetup</dt>
            <dd>Set to 1 if setup is disabled. Not defined if setup is enabled.</dd>
            <dt>player_list</dt>
            <dd>
              Links to player setup pages, one link per player, built using
              homeplayer_list.html.
            </dd>
            <dt>playercount</dt>
            <dd>Count of players.</dd>
            <dt>song_count</dt>
            <dd>
              Count of songs in library. Includes the word song
              or songs after the number.
            </dd>
          </dl>
        </dd>
        <dt><em>Expected user provided parameters:</em></dt>
        <dd>
          <dl>
            <dt>forget</dt>
            <dd>
              If this parameter is set in the HTTP request, the server will delete
              all information about the client refered to by the <var>player</var>
              parameter.
            </dd>
          </dl>
        </dd>
      </dl>
    </dd>
    <dt>browse.html</dt>
    <dd>General variables</dd>
    <dd>
      <dl>
        <dt><em>Server provided variables:</em></dt>
        <dd>
          <dl>
            <dt>album_count</dt>
            <dd>
              Count of unique albums in library. Includes the word album
              or albums after the number.
            </dd>
            <dt>artist_count</dt>
            <dd>
              Count of unique artists in library. Includes the word artist
              or artists after the number.
            </dd>
            <dt>browse_list</dt>
            <dd>
              List of items in the container being browsed, formatted into
              a string using browse_list.html and the raw list of items.
            </dd>
            <dt>browselist_header</dt>
            <dd>
              Header built using pagebarheader.html. Typically used to
              indicate the range of items being displayed.
            </dd>
            <dt>browselist_pagebar</dt>
            <dd>
              List of pages of items in the container being browsed,
              formatted into a string using pagebar.html.
            </dd>
            <dt>nopagebar</dt>
            <dd>
              Set to 1 to suppress the generation of the pagebar. Typically
              set in the include.html file.
            </dd>
            <dt>pwd_list</dt>
            <dd>
              List of containers leading to the current container,
              formatted into a string using browse_pwdlist.html.
            </dd>
            <dt>song_count</dt>
            <dd>
              Count of songs in library. Includes the word song
              or songs after the number.
            </dd>
          </dl>
        </dd>
        <dt><em>Expected user provided parameters:</em></dt>
        <dd>
          <dl>
            <dt>dir</dt>
            <dd>
              Virtual path to current container.
            </dd>
            <dt>start</dt>
            <dd>
              Starting item number for current page.
            </dd>
          </dl>
        </dd>
      </dl>
    </dd>
  </dl>
  <p>older info, the following is somewhat out of date and is in the process of being updated</p>
  <dl>
    <dt><strong>index.html</strong></dt>
    <dd>
      <dl>
        <dt><em>Server provided parameters</em></dt>
        <dd>General Variables only</dd>
        <dt><em>Expected user provided parameters</em></dt>
        <dd>none</dd>
      </dl>
    </dd>
    <dt><strong>browse.html</strong></dt>
    <dd>
      <dl>
        <dt>Server provided parameters</dt>
        <dd>
          <dl>
            <dt>playlist</dt>
            <dt>pwd_list</dt>
            <dt>playlistname</dt>
            <dt>titled</dt>
            <dt>browse_list</dt>
            <dt>browselist_header</dt>
            <dt>browselist_pagebar</dt>
          </dl>
        </dd>
        <dt>Expected user provided parameters</dt>
        <dd>
          <dl>
            <dt>dir</dt>
            <dt>newname</dt>
            <dt>delete</dt>
            <dt>start</dt>
          </dl>
        </dd>
      </dl>
    <dt><strong>browse_playlist.html</strong></dt>
    <dd>
      <dl>
        <dt>Server provided parameters</dt>
        <dd>
          <dl>
            <dt>playlist</dt>
            <dt>pwd_list</dt>
            <dt>playlistname</dt>
            <dt>titled</dt>
            <dt>browse_list</dt>
            <dt>browselist_header</dt>
            <dt>browselist_pagebar</dt>
            <dt>RENAME_WARNING</dt>
            <dt>warn</dt>
          </dl>
        </dd>
        <dt>Expected user provided parameters</dt>
        <dd>
          <dl>
            <dt>dir</dt>
            <dt>newname</dt>
            <dt>delete</dt>
            <dt>start</dt>
          </dl>
        </dd>
      </dl>
    </dd>
    <dt><strong>browse_pwdlist.html</strong></dt>
    <dd>
      <dl>
        <dt>Server provided parameters</dt>
        <dd>
          <dl>
            <dt>player</dt>
            <dt>myClientState</dt>
            <dt>dir</dt>
            <dt>shortdir</dt>
          </dl>
        </dd>
        <dt>Expected user provided parameters</dt>
        <dd>
          none
        </dd>
      </dl>
    </dd>
    <dt><strong>browse_playlist_list.html</strong></dt>
    <dd>
      <dl>
        <dt>Server provided parameters</dt>
        <dd>
          <dl>
            <dt>descend</dt>
            <dt>title</dt>
            <dt>artist</dt>
            <dt>album</dt>
            <dt>itemobj</dt>
            <dt>odd</dt>
            <dt>player</dt>
            <dt>anchor</dt>
          </dl>
        </dd>
        <dt>Expected user provided parameters</dt>
        <dd>
          none
        </dd>
      </dl>
    </dd>
    <dt><strong>browse_list.html</strong></dt>
    <dd>
      <dl>
        <dt>Server provided parameters</dt>
        <dd>
          <dl>
            <dt>descend</dt>
            <dt>title</dt>
            <dt>artist</dt>
            <dt>album</dt>
            <dt>itemobj</dt>
            <dt>odd</dt>
            <dt>player</dt>
            <dt>anchor</dt>
          </dl>
        <dt>Expected user provided parameters</dt>
        <dd>
          none
        </dd>
      </dl>
    </dd>
    <dt><strong>pagebarheader.html</strong></dt>
    <dd>
      <dl>
        <dt>Server provided parameters</dt>
        <dd>
          <dl>
            <dt>start</dt>
            <dt>end</dt>
            <dt>itemcount</dt>
          </dl>
        </dd>
        <dt>Expected user provided parameters</dt>
        <dd>
          none
        </dd>
      </dl>
    </dd>
    <dt><strong>pagebar.html</strong></dt>
    <dd>
      <dl>
        <dt>Server provided parameters</dt>
        <dd>
          <dl>
            <dt>pagesstart</dt>
            <dt>pagesprev</dt>
            <dt>pagesend</dt>
            <dt>pagesnext</dt>
            <dt>pageprev</dt>
            <dt>pagenext</dt>
            <dt>otherparams</dt>
            <dt>pageslist</dt>
          </dl>
        </dd>
        <dt>Expected user provided parameters</dt>
        <dd>
          none
        </dd>
      </dl>
    </dd>
    <dt><strong>pagebarlist.html</strong></dt>
    <dd>
      <dl>
        <dt>Server provided parameters</dt>
        <dd>
          <dl>
            <dt>currpage</dt>
            <dt>itemnum0</dt>
            <dt>itemnum1</dt>
            <dt>pagenum</dt>
            <dt>otherparams</dt>
          </dl>
        </dd>
        <dt>Expected user provided parameters</dt>
        <dd>
          none
        </dd>
      </dl>
    </dd>
    <dt><strong>alphapagebarlist.html</strong></dt>
    <dd>
      <dl>
        <dt>Server provided parameters</dt>
        <dd>
          <dl>
            <dt>currpage</dt>
            <dt>itemnum0</dt>
            <dt>itemnum1</dt>
            <dt>pagenum</dt>
            <dt>otherparams</dt>
            <dt>fragment</dt>
          </dl>
        </dd>
        <dt>Expected user provided parameters</dt>
        <dd>
          none
        </dd>
      </dl>
    </dd>
    <dt><strong>status.html</strong></dt>
    <dd>
      <dl>
        <dt><em>Server provided parameters</em></dt>
        <dd>
          <dl>
            <dt>currentsong</dt>
            <dt>thissongnum</dt>
            <dt>songcount</dt>
            <dt>songtitle</dt>
            <dt>artist</dt>
            <dt>album</dt>
            <dt>player_name</dt>
            <dt>cansave</dt>
            <dt>player_chooser_list</dt>
            <dt>playlist</dt>
            <dt>start</dt>
            <dt>playlist_header</dt>
            <dt>playlist_pagebar</dt>
            <dt>shuffle</dt>
            <dt>repeat</dt>
            <dt>modeplay</dt>
            <dt>modepause</dt>
            <dt>modestop</dt>
            <dt>volume</dt>
          </dl>
        </dd>
        <dt><em>Expected user provided parameters</em></dt>
        <dd>
          <dl>
            <dt>player</dt>
            <dt>refresh</dt>
            <dt>p0</dt>
            <dt>p1</dt>
            <dt>p2</dt>
            <dt>p3</dt>
            <dt>p4</dt>
          </dl>
        </dd>
      </dl>
    </dd>
    <dt><strong>status_list.html</strong></dt>
    <dd>
      <dl>
        <dt><em>Server provided parameters</em></dt>
        <dd>
          <dl>
            <dt>player</dt>
            <dt>myClientState</dt>
            <dt>num</dt>
            <dt>odd</dt>
            <dt>currentsong</dt>
            <dt>title</dt>
            <dt>artist</dt>
            <dt>album</dt>
            <dt>start</dt>
          </dl>
        </dd>
        <dt><em>Expected user provided parameters</em></dt>
        <dd>
          none
        </dd>
      </dl>
    </dd>
    <dt><strong>home.html</strong></dt>
    <dd>
      <dl>
        <dt><em>Server provided parameters</em></dt>
        <dd>
          <dl>
            <dt>additionalLinks</dt>
            <dt>album_count</dt>
            <dt>artist_count</dt>
            <dt>nofolder</dt>
            <dt>nosetup</dt>
            <dt>path</dt>
            <dt>player_list</dt>
            <dt>playercount</dt>
            <dt>song_count</dt>
          </dl>
        </dd>
        <dt><em>Expected user provided parameters</em></dt>
        <dd>
          <dl>
            <dt>forget</dt>
          </dl>
        </dd>
      </dl>
    </dd>
    <dt><strong>homeplayer_list.html</strong></dt>
    <dd>
      <dl>
        <dt><em>Server provided parameters</em></dt>
        <dd>
          <dl>
            <dt>playername</dt>
            <dt>playerid</dt>
            <dt>player</dt>
          </dl>
        </dd>
        <dt><em>Expected user provided parameters</em></dt>
        <dd>
          none
        </dd>
      </dl>
    </dd>
    <dt><strong>search.html</strong></dt>
    <dd>
      <dl>
        <dt><em>Server provided parameters</em></dt>
        <dd>
          <dl>
            <dt>browse_list</dt>
            <dt>numresults</dt>
            <dt>searchlist_header</dt>
            <dt>searchlist_pagebar</dt>
          </dl>
        </dd>
        <dt><em>Expected user provided parameters</em></dt>
        <dd>
          <dl>
            <dt>query</dt>
            <dt>type</dt>
            <dt>start</dt>
          </dl>
        </dd>
      </dl>
    </dd>
    <dt><strong>browsedb_list.html</strong></dt>
    <dd>
      <dl>
        <dt><em>Server provided parameters</em></dt>
        <dd>
          <dl>
            <dt>player</dt>
            <dt>genre</dt>
            <dt>artist</dt>
            <dt>album</dt>
            <dt>song</dt>
            <dt>itemobj</dt>
            <dt>title</dt>
            <dt>descend</dt>
            <dt>odd</dt>
            <dt>anchor</dt>
          </dl>
        </dd>
        <dt><em>Expected user provided parameters</em></dt>
        <dd>
          none
        </dd>
      </dl>
    </dd>
    <dt><strong>songinfo.html</strong></dt>
    <dd>
      <dl>
        <dt><em>Server provided parameters</em></dt>
        <dd>
          <dl>
            <dt>composer</dt>
            <dt>conductor</dt>
            <dt>title</dt>
            <dt>filelength</dt>
            <dt>duration</dt>
            <dt>year</dt>
            <dt>tagversion</dt>
            <dt>comment</dt>
            <dt>bitrate</dt>
            <dt>url</dt>
            <dt>itemobj</dt>
          </dl>
        </dd>
        <dt><em>Expected user provided parameters</em></dt>
        <dd>
          <dl>
            <dt>itemobj</dt>
            <dt>genre</dt>
            <dt>artist</dt>
            <dt>album</dt>
            <dt>track</dt>
          </dl>
        </dd>
      </dl>
    </dd>
    <dt><strong>browsedb.html</strong></dt>
    <dd>
      <dl>
        <dt><em>Server provided parameters</em></dt>
        <dd>
          <dl>
            <dt>warn</dt>
            <dt>itunes</dt>
            <dt>pwd_list</dt>
            <dt>browseby</dt>
            <dt>browselist_pagebar</dt>
            <dt>browse_list</dt>
            <dt>descend</dt>
          </dl>
        </dd>
        <dt><em>Expected user provided parameters</em></dt>
        <dd>
          <dl>
            <dt>song</dt>
            <dt>genre</dt>
            <dt>artist</dt>
            <dt>album</dt>
            <dt>start</dt>
          </dl>
        </dd>
      </dl>
    </dd>
    <dt><strong>browsedb_pwdlist.html</strong></dt>
    <dd>
      <dl>
        <dt><em>Server provided parameters</em></dt>
        <dd>
          <dl>
            <dt>player</dt>
            <dt>song</dt>
            <dt>artist</dt>
            <dt>album</dt>
            <dt>genre</dt>
            <dt>pwditem</dt>
          </dl>
        </dd>
        <dt><em>Expected user provided parameters</em></dt>
        <dd>
          none
        </dd>
      </dl>
    </dd>
  </dl>
<hr />
  <h4><a id="oldtemplate-syntax">Old Template Syntax</a></h4>
  <p>
    The template files in the skin directory are primarily html, with some
    server-side processing directives contained in square brackets added.  In
    some cases they are complete pages, in others fragments which are meant to
    be included into a surrounding page.  The interrelationships of the files
    are discussed below in the <strong>Template Dependencies</strong> section of
    this document.  The directives are discussed below in the <strong>Template
    Directives</strong> section.
  </p>

<p> When a dynamic page is requested, the server builds a parameter hash which
  is used along with the template to create the final html which is returned to
  the requestor. The server-side directives contain references to the keys of
  this parameter hash. For practical purposes this means that each template has
  a list of parameters available to it which it uses with the directives to produce
  the desired final text. The list of parameters available to each template is
  discussed below in the <strong>Template Parameters</strong> section.</p>
  <hr />
  <h4><a id="oldtemplate-direct">Old Template Directives</a></h4>
  <p>
    Template directive outline conditions for text replacement.  The directives
    are evaluated in the order below, one at a time, starting at the beginning of
    the template and proceeding to the end, starting over for the next directive
    type at the beginning.  The mechanism used is regular expression search and
    replace, so certain restrictions apply.
  </p>
  <p>
<ul>
  <li>A directive cannot contain itself (even with a different parameter).</li>
  <li>Different directives can be contained within each other.</li>
  <li>Overlapping directives are also not allowed.</li>
  <li>Line endings within the text portion of directives are allowed, so a directive
    may span multiple lines.</li>
</ul>
  <dl>
    <dt><strong>[EVAL] <var>text</var> [/EVAL]</strong></dt>
    <dd>
      The <strong>EVAL</strong> directive executes the perl code which it frames
      (the <var>text</var>).  The code should set a variable named $out to a
      string which will replace the directive.  It is acceptable to not set $out
      to anything, in which case the directive will be replaced by an empty
      string. If the code should fail, the directive will be replaced with the
      word &quot;ERROR&quot;.
    </dd>
    <dd>
      Replaced by <strong>[% PERL %] <var>text</var> [% END %]</strong>
      under Template Toolkit.  Using this definitely will require reading the
      Template Toolkit documentation thoroughly.
    </dd>
    <dt><strong>{%<var>param</var>}</strong></dt>
    <dd>
      The <strong>%</strong> directive is replaced with the URL escaped value
      of <var>param</var> (for example, spaces become %20, / becomes %2f, etc.).
      If <var>param</var> is undefined, the directive is replaced with the empty
      string.
    </dd>
    <dd>
      Replaced by <strong>[% <var>param</var> | uri %]</strong> under Template Toolkit.
    </dd>
    <dt><strong>{&amp;<var>param</var>}</strong></dt>
    <dd>
      The <strong>&amp;</strong> directive is replaced with the HTML encoded value
      of <var>param</var> (for example, &lt; becomes &amp;lt;, &gt; becomes &amp;gt;,
      etc.). If <var>param</var> is undefined, the directive is replaced with the
      empty string.
    </dd>
    <dd>
      Replaced by <strong>[% <var>param</var> | html %]</strong> under Template Toolkit.
    </dd>
    <dt><strong>{<var>param</var>}</strong></dt>
    <dd>
      This directive is replaced with the value of <var>param</var>.  If
      <var>param</var> is undefined, the directive is replaced with the empty
      string.
    </dd>
    <dd>Replaced by <strong>[% <var>param</var> %]</strong> under Template Toolkit.</dd>
    <dt><strong>[S <var>string</var>]</strong></dt>
    <dd>
      The <strong>S</strong> directive is replaced by the language specific
      string defined for <var>string</var> in strings.txt.  If <var>string</var>
      is not defined for the current language, the default language definition
      is used.  If <var>string</var> is also not defined for the default language
      the directive is replaced by the empty string.
    </dd>
    <dd>Replaced by <strong>[% <var>string</var> | string %]</strong> under Template Toolkit.</dd>
    <dt><strong>[SET <var>name</var> <var>value</var>]</strong></dt>
    <dd>
      Using the <strong>SET</strong> directive will set the parameter with the
      given <var>name</var> to the given <var>value</var>. This is useful with
      the <strong>INCLUDE</strong> directive for setting values in subsequently
      included files, as well with IF and other conditional directives for
      changing the HTML dynamically.
    </dd>
    <dd>
      Replaced by <strong>[% <var>param</var> = <var>value</var> %]</strong> under Template Toolkit.
    </dd>
    <dt><strong>[IF <var>param</var>] <var>text</var> [/IF]</strong></dt>
    <dd>
      The <strong>IF</strong> directive evaluates <var>param</var> according to
      standard perl rules.  If <var>param</var> evaluates to true, then
      <var>text</var> is included in the final output, otherwise the directive is
      replaced by an empty string.  Under the standard perl rules,
      <var>param</var> is false if it has a value of 0 (or &quot;0&quot;), is
      undefined (does not exist), or is the empty string (&quot;&quot;).
    </dd>
    <dd>
      Replaced by <strong>[% IF <var>param</var> %] <var>text</var> [% END %]</strong>
      under Template Toolkit.
    </dd>
    <dt><strong>[IFN <var>param</var>] <var>text</var> [/IFN]</strong></dt>
    <dd>
      The <strong>IFN</strong> directive works the same as the
      <strong>IF</strong> directive, except that <var>text</var> is included if
      <var>param</var> evaluates to false instead of true.
    </dd>
    <dd>
      Replaced by <strong>[% IF not <var>param</var> %] <var>text</var> [% END %]</strong>
      under Template Toolkit.
    </dd>
    <dt><strong>[EQ <var>param</var> <var>value</var>] <var>text</var> [/EQ]</strong></dt>
    <dd>
      The <strong>EQ</strong> directive evaluates <var>param</var> to see if its
      value is equal to <var>value</var>.  If so, <var>text</var> is included in the
      final output, otherwise the empty string replaces the directive.  If
      <var>param</var> is undefined, it is considered to be not equal to
      <var>value</var>.
    </dd>
    <dd>
      Replaced by <strong>[% IF <var>param</var> == <var>value</var> %]
      <var>text</var> [% END %]</strong> or <strong>[% IF <var>param</var> eq
      <var>value</var> %] <var>text</var> [% END %]</strong> (depending on
      whether you are comparing numbers or strings) under Template Toolkit.
    </dd>
    <dt><strong>[NE <var>param</var> <var>value</var>] <var>text</var> [/NE]</strong></dt>
    <dd>
      The <strong>NE</strong> directive works the same as the
      <strong>EQ</strong> directive, except that <var>text</var> is included if
      the value of <var>param</var> is not equal to <var>value</var>.  Once again,
      if <var>param</var> is undefined, it is considered to be not equal to
      <var>value</var>, so <var>text</var> would be included in that case.
    </dd>
    <dd>
      Replaced by <strong>[% IF <var>param</var> != <var>value</var> %]
      <var>text</var> [% END %]</strong> or <strong>[% IF <var>param</var> ne
      <var>value</var> %] <var>text</var> [% END %]</strong> (depending on
      whether you are comparing numbers or strings) under Template Toolkit.
    </dd>
    <dt><strong>[GT <var>param</var> <var>value</var>] <var>text</var> [/GT]</strong></dt>
    <dd>
      The <strong>GT</strong> directive evaluates <var>param</var> to see if its
      value is greater than <var>value</var>.  If so, <var>text</var> is included in the
      final output, otherwise the empty string replaces the directive.  If
      <var>param</var> is undefined, it is considered to be not greater than
      <var>value</var>.
    </dd>
    <dd>
      Replaced by <strong>[% IF <var>param</var> &gt; <var>value</var> %]
      <var>text</var> [% END %]</strong> or <strong>[% IF <var>param</var> gt
      <var>value</var> %] <var>text</var> [% END %]</strong> (depending on
      whether you are comparing numbers or strings) under Template Toolkit.
    </dd>
    <dt><strong>[LT <var>param</var> <var>value</var>] <var>text</var> [/LT]</strong></dt>
    <dd>
      The <strong>LT</strong> directive evaluates <var>param</var> to see if its
      value is less than <var>value</var>. If so, <var>text</var> is included in the
      final output, otherwise the empty string replaces the directive. If
      <var>param</var> is undefined, it is considered to be not less than
      <var>value</var>.
    </dd>
    <dd>
      Replaced by <strong>[% IF <var>param</var> &lt; <var>value</var> %]
      <var>text</var> [% END %]</strong> or <strong>[% IF <var>param</var> lt
      <var>value</var> %] <var>text</var> [% END %]</strong> (depending on
      whether you are comparing numbers or strings) under Template Toolkit.
    </dd>
    <dt><strong>[INCLUDE <i>html/path/here.html</i>]</strong></dt>
    <dd>
      Using the <strong>INCLUDE</strong> directive will include the parsed
      contents of the file in html/path/here.html in the output. Useful for
      sharing content across several html template files.
    </dd>
    <dd>
      Replaced by <strong>[% PROCESS <i>html/path/here.html</i> %]</strong> under Template Toolkit.
    </dd>
    <dt><strong>[STATIC <i>html/path/here.html</i>]</strong></dt>
    <dd>
      Using the <strong>STATIC</strong> directive will include the parsed
      contents of the file in html/path/here.html in the output, but will not parse the file for
      template directives.
    </dd>
    <dd>
      Replaced by <strong>[% INSERT <i>html/path/here.html</i> %]</strong> under Template Toolkit.
    </dd>
    <dt><strong>[NB]<var>text</var>[/NB]</strong></dt>
    <dd>
      The <strong>NB</strong> directive replaces spaces in <var>text</var> with
      &amp;nbsp; in order to prevent line wrapping in the middle of <var>text</var>.
    </dd>
    <dd>
      Replaced by <strong>[% FILTER nbsp %]<var>text</var> [% END %]</strong> under Template Toolkit.
    </dd>
    <dt><strong>[E]<var>text</var>[/E]</strong></dt>
    <dd>
      The <strong>E</strong> directive replaces <var>text</var> with its URL
      escaped equivalent.
    </dd>
    <dd>
      Replaced by <strong>[% FILTER uri %]<var>text</var> [% END %]</strong> under Template Toolkit.
    </dd>
    <dt><strong>&amp;lsqb;</strong></dt>
    <dt><strong>&amp;rsqb;</strong></dt>
    <dt><strong>&amp;lbrc;</strong></dt>
    <dt><strong>&amp;rbrc;</strong></dt>
    <dd>
      Not really directives, but also not standard html.  These strings are
      replaced by [ (for <strong>&amp;lsqb;</strong>), ]
      (for <strong>&amp;rsqb;</strong>), { (for <strong>&amp;lbrc;</strong>),
      and } (for <strong>&amp;rbrc;</strong>).  They are used to avoid having normal
      text interpreted as a directive.  The use of <strong>&amp;#91;</strong>
      for [, <strong>&amp;#93;</strong> for ], <strong>&amp;#123;</strong> for
      {, and <strong>&amp;#125;</strong> for } would also work, and
      would be standard html.
    </dd>
    <dd>
      Not needed under Template Toolkit.
    </dd>
  </dl>
  </p>
  <hr />
[* TAGS template *]
[% PROCESS helpfooter.html %]

[% PROCESS header.html pwd="yes" nokbd="yes" %]

[% MACRO logicalSelectionBlock BLOCK %]
<select name="[% name %]">
 <option value="=">[% "EQUALS" | string %]</option>
 <option value="&lt;">[% "LESSTHAN" | string %]</option>
 <option value="&gt;">[% "GREATERTHAN" | string %]</option>
 <option value="!=" >[% "NOT" | string %]</option>
</select>
[% END %]

[% MACRO timeSelectionBlock BLOCK %]
<select name="[% name %]">
 <option value="=" >[% "IS" | string %]</option>
 <option value="&lt;" >[% "BEFORE" | string %]</option>
 <option value="&gt;" >[% "AFTER" | string %]</option>
</select>
[% END %]

<div id="pwd">
 [% IF searchlist_pagebar %]
 <span class="pagebar">[% searchlist_pagebar %]</span>
 [% END %]<a onclick="parent.browseurl('advanced_search.html?');">[% "ADVANCEDSEARCH" | string %]</a> /
</div>

<div align="center">
 <form action="advanced_search.html" method="get" name="searchForm">
 <input type="hidden" value="[% player %]" name="player">
  <table class="border" border="0" cellpadding="3" cellspacing="1" width="100%">

   <tr>
    <td class="content" align="right" valign="middle" width="30%">[% "TRACK" | string %]&nbsp;</td>
    <td class="content" align="left" valign="middle" width="70%">
     <input name="search.track_titlesearch" value="[% search.track_titlesearch.value %]" size="35" maxlength="100" type="text"/>
    </td>
   </tr>

   <tr>
    <td class="content" align="right" valign="middle" width="30%">[% "ARTIST" | string %]&nbsp;</td>
    <td class="content" align="left" valign="middle" width="70%">
     <input name="search.contributor_namesearch" value="[% search.contributor_namesearch.value %]" size="35" maxlength="100" type="text"/>
    </td>
   </tr>

   <tr>
    <td class="content" align="right" valign="middle" width="30%">[% "ALBUM" | string %]&nbsp;</td>
    <td class="content" align="left" valign="middle" width="70%">
     <input name="search.album_titlesearch" value="[% search.album_titlesearch.value %]" size="35" maxlength="100" type="text"/>
    </td>
   </tr>

   <tr>
    <td class="content" align="right" valign="middle" width="30%">[% "GENRE" | string %]&nbsp;</td>
    <td class="content" align="left" valign="middle" width="70%">

     <select name="search.genre">
      <option value="">Any [% "GENRE" | string %]</option>

      [% FOREACH genre = genres %]

       [% NEXT IF NOT genre.name %]

       <option value="[% genre.id %]" [% IF search.genre.value == genre.id %]selected[% END %]>[% genre.name %]</option>

      [% END %]
     </select>
    </td>
   </tr>

   <tr>
    <td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "LENGTH" | string %]&nbsp;</td>
    <td class="content" align="left" valign="middle" width="70%">

     [% logicalSelectionBlock(name='search.secs.op') %]

     <input name="search.secs" value="[% search.secs.value %]" size="4" maxlength="4" style="text-align: right;" type="text"/>
     [% "SECONDS" | string %]
    </td>
   </tr>

   <tr>
    <td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "TRACK" | string %]&nbsp;</td>
    <td class="content" align="left" valign="middle" width="70%">

     [% logicalSelectionBlock(name='search.tracknum.op') %]

     <input name="search.tracknum" value="[% search.tracknum.value %]" size="3" maxlength="3" style="text-align: right;" type="text"/>
    </td>
   </tr>

   <tr>
    <td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "YEAR" | string %]&nbsp;</td>
    <td class="content" align="left" valign="middle" width="70%">

     [% timeSelectionBlock(name='search.year.op') %]

     <input name="search.year" value="[% search.year.value %]" size="4" maxlength="4" style="text-align: right;" type="text"/>
    </td>
   </tr>

   <tr>
    <td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "MODTIME" | string %]&nbsp;</td>
    <td class="content" align="left" valign="middle" width="70%">

     [% timeSelectionBlock(name='search.timestamp.op') %]

     <input name="search.timestamp" value="[% search.timestamp.value %]" size="10" maxlength="10" type="text"/>
     &nbsp; ex: [% dateFormat %]
    </td>
   </tr>

   <tr>
    <td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "BITRATE" | string %]&nbsp;</td>
    <td class="content" align="left" valign="middle" width="70%">

     [% logicalSelectionBlock(name='search.bitrate.op') %]

     <select name="search.bitrate">
      <option value="">Any Value</option>

      [% FOREACH bitRate = [ 32 40 48 56 64 80 96 112 128 160 192 224 256 320 ] %]
       <option value="[% bitRate %]" [% IF search.bitrate.value == (bitRate * 1000) %]selected[% END %]>[% bitRate %]</option>
      [% END %]

     </select> [% "KBPS" | string %]
    </td>
   </tr>

<!--
   <tr>
    <td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">Sample Rate&nbsp;</td>
    <td class="content" align="left" valign="middle" width="70%">

     [% logicalSelectionBlock(name='search.samplerate.op') %]

     <select name="search.samplerate">
      <option value="">Any Value</option>

      [% FOREACH sampleRate = [ 32000 44100 ] %]
       <option value="[% sampleRate %]">[% sampleRate %]</option>
      [% END %]
     </select> kHz
    </td>
   </tr>
-->

   <tr>
    <td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "TYPE" | string %]&nbsp;</td>
    <td class="content" align="left" valign="middle" width="70%">

     <select name="search.content_type">
      <option value="">Any Type</option>

      [% FOREACH type = fileTypes.keys %]
       <option value="[% type %]" [% IF search.content_type.value == type %]selected[% END %]>[% fileTypes.$type %]</option>
      [% END %]
     </select>
    </td>
   </tr>

   <tr>
    <td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "FILELENGTH" | string %]&nbsp;</td>
    <td class="content" align="left" valign="middle" width="70%">

     [% logicalSelectionBlock(name='search.filesize.op') %]

     <input name="search.filesize" value="[% search.filesize.value %]" size="12" maxlength="12" style="text-align: right;" type="text"/>
     [% "BYTES" | string %]
    </td>
   </tr>
<!-- 
 Not yet.

   <tr>
    <td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">[% "COMMENT" | string %]&nbsp;</td>
    <td class="content" align="left" valign="middle" width="70%">
     <input name="search.comments" value="" size="35" maxlength="1000" type="text"/>
    </td>
   </tr>

   <tr>
    <td class="content" align="right" nowrap="nowrap" valign="middle" width="30%">Lyrics</td>
    <td class="content" align="left" valign="middle" width="70%">
      <input name="search.lyrics" value="" size="35" maxlength="1000" type="text"/>
    </td>
   </tr>
-->

   <tr>
    <td colspan="2" class="content" align="center" valign="middle">
     <br/>
     <input value="[% "SEARCH" | string %]" type="submit"/>
     <input value="[% "CLEAR"  | string %]" type="reset"/>
    </td>
   </tr>
  
  </table>
 </form>
</div>

[% IF numresults != '-1' %]
 <hr/>
 <p>[% "TRACKSMATCHING" | string %] [% "COLON" | string %][% numresults %]</p>
[% END %]

[% IF searchlist_header %]
 <p>[% searchlist_header %][% "COLON" | string %]</p>
[% END %]

[% IF browse_list %]
<table>
 [% browse_list %]
</table>
[% END %]

</body>
</html>
